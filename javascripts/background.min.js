/* STATIC */

var trigger_words = [
  // Parties
  "UKIP",
  "Tories",
  "Tory",
  "Conservatives",
  "Conservative",
  "Labour",
  "Lib Dems",
  "Liberal Democrats",
  "Greens",
  "SNP",
  "Scottish National Party",
  "DUP",
  "Democratic Unionist Party",
  "Sinn Fein",
  "Sinn FÃ©in",
  // Issues
  "Brexit",
  "Grenfell",
  "NHS",
  "EU",
  "Irish land border",
  "Donald Trump",
  "Refugee",
  "Gig economy",
  "Deficit",
  "Tax",
  // Institutions
  "Government",
  "Democracy",
  "Parliament",
  "Home Office",
  "Home Secretary",
  "Foreign Secretary",
  "Minister",
  "MP",
  "Mayor",
  "Court",
  "Party",
  "Royal",
  "Poll",
  "Constituency",
  "Candidate",
  "Vote",
  // Political terms
  "Politics",
  "Political",
  "Corruption",
  "Corrupt",
  "Corrupted",
  "Pledge",
  "Bribe",
  "Voting",
  "Process",
  "Complaint",
  "Defendant",
  "Investigation",
  "Betrayal",
  "U-turn"
];

// function verificaIdioma() {
//     if (navigator.browserLanguage) var e = navigator.browserLanguage;
//     else if (navigator.language) var e = navigator.language;
//     return e
// }

var current_lang = 'en';

var langs = [{
    lang: 'en',
    title: 'Change language to English (EN)',
    image: chrome.extension.getURL("images/1492559439_um.png")
}
];
var database;
var interval = 1000 * 60 * 60 * 24 * 1; // 1 day;

function loadDatabase() {
    database = MPs.persons;
    console.log(`Loaded database`,database)
}
loadDatabase();

chrome.runtime.onMessage.addListener(function (message, sender, sendResponse) {
    switch (message.action) {
        case 'config':
            sendResponse({
                trigger_words: trigger_words,
                current_lang: current_lang,
                langs: langs
            });
            break;
        case 'check_names':
            sendResponse({
                database: database
            });
            break;
        case 'set_lang':
            current_lang = message.lang;
            sendResponse();
            break;
    }
});

setInterval(function () {
    loadDatabase()
}, interval);

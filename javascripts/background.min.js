/* STATIC */

var trigger_words = [
    "caixa 2",
    "votos",
    "presidenciavel",
    "candidato",
    "Senat",
    "Senator",
    "politischer",
    "Informant",
    "Kongress",
    "Senatoren",
    "Arbeiterpartei",
    "Präsident",
    "Ex-Präsident",
    "Mitglied",
    "Stellvertreter",
    "dep. Bund",
    "politisches",
    "Politik",
    "Kamera",
    "Betrayal",
    "Lava-Jato",
    "Leck",
    "STF",
    "Supremo Tribuinal Federal",
    "PEC",
    "Korruption",
    "korrupt",
    "Fee",
    "inquérito",
    "Odebrecht",
    "Petrobras",
    "Zitiert",
    "Verfahren",
    "PMDB",
    "PSDB",
    "PP",
    "PDT",
    "PSB",
    "PPS",
    "PSC",
    "PCdoB",
    "PSD",
    "PRP",
    "PSL",
    "PMN",
    "PHS",
    "PTC",
    "PTdoB",
    "PSDC",
    "PTN",
    "PRTB",
    "Stift",
    "LPP",
    "PMB",
    "PSTU",
    "PCB",
    "PCO",
    "Minister",
    "Herrscher",
    "Bürgermeister",
    "Regierung",
    "Demokratie",
    "Parlament",
    "Kandidat",
    "Beschwerde",
    "beschuldigt",
    "Beklagt",
    "Gericht",
    "Sénat",
    "sénateur",
    "politique",
    "informateur",
    "congrès",
    "sénateurs", "Parti ouvrier",
    "président",
    "lex-président",
    "membre",
    "députés",
    "dep. fédérale",
    "politique",
    "politique",
    "appareil photo",
    "trahison",
    "jet de lave",
    "fuite",
    "grade",
    "PEC",
    "corruption",
    "corrompu",
    "frais",
    "Odebrecht",
    "Petrobras",
    "processus",
    "ministre",
    "règle",
    "maire",
    "gouvernement",
    "démocratie",
    "parlement",
    "candidat",
    "plainte",
    "accusé",
    "défendeur",
    "tribunal",
    "Partido de los trabajadores",
    "ex presidente",
    "presidente",
    "miembro",
    "diputados",
    "dep. federales",
    "traición",
    "lava jato",
    "Grado",
    "PEC",
    "Corrupción",
    "corrupta",
    "Cargo",
    "Odebrecht",
    "Petrobras",
    "citadas",
    "proceso",
    "regla",
    "mayor",
    "gobierno",
    "democracia",
    "parlamento",
    "candidato",
    "acusado",
    "demandado",
    "Senate",
    "senator",
    "delator",
    "congress",
    "senators",
    "president",
    "ex-president",
    "deputy",
    "Federal depot",
    "Political",
    "chamber",
    "Lava Jato",
    "Car Wash",
    "Voting",
    "PEC",
    "Corruption",
    "Corrupted",
    "Pledge",
    "Odebrecht",
    "Petrobras",
    "Cited",
    "Process",
    "Minister",
    "Governor",
    "Mayor",
    "Government",
    "Democracy",
    "Parliament",
    "Candidate",
    "Complaint",
    "Defendant",
    "Defendant",
    "investigation",
    "senado",
    "senador",
    "senadores", "deputado",
    "deputados",
    "dep. federal",
    "Delação",
    "Lava jato",
    "Vazamento",
    "Votação",
    "PEC",
    "Corrupção",
    "Corrupto",
    "Propina",
    "Odebrecht",
    "Citado",
    "PMDB",
    "PSDB",
    "PDT",
    "PTB",
    "DEM",
    "PSB",
    "PPS",
    "PSC",
    "PCdoB",
    "PRB",
    "PSD",
    "PRP",
    "PSL",
    "PMN",
    "PHS",
    "PTC",
    "PTdoB",
    "PSDC",
    "PTN",
    "PRTB",
    "PSOL",
    "PPL",
    "PMB",
    "PSTU",
    "PCB",
    "PCO",
    "previdencia"
];
var database_url = 'https://s3.amazonaws.com/vigieaqui-static-files/database.json';

function verificaIdioma() {
    if (navigator.browserLanguage) var e = navigator.browserLanguage;
    else if (navigator.language) var e = navigator.language;
    return e
}

if (verificaIdioma() == 'pt-BR')
    var current_lang = 'pt-br';
else
    var current_lang = 'en';

var langs = [{
    lang: 'pt-br',
    title: 'Alterar para Português-BR',
    image: chrome.extension.getURL("images/1492559387_br.png")
},
{
    lang: 'en',
    title: 'Change language to English (EN)',
    image: chrome.extension.getURL("images/1492559439_um.png")
}
];
var database;
var interval = 1000 * 60 * 60 * 24 * 1; // 1 day;

function loadDatabase() {
    $.ajax({
        url: database_url
    }).done(function (response) {
        database = JSON.parse(response);
    });
}
loadDatabase();




chrome.runtime.onMessage.addListener(function (message, sender, sendResponse) {
    switch (message.action) {
        case 'config':
            sendResponse({
                trigger_words: trigger_words,
                current_lang: current_lang,
                langs: langs
            });
            break;
        case 'check_names':
            sendResponse({
                database: database
            });
            break;
        case 'set_lang':
            current_lang = message.lang;
            sendResponse();
            break;
    }
});

setInterval(function () { 
    loadDatabase() 
}, interval);


